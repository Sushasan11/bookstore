---
phase: 24-wishlist-and-pre-booking
plan: "03"
type: execute
wave: 3
depends_on: ["24-02"]
files_modified: []
autonomous: false
requirements: [WISH-01, WISH-02, WISH-03, WISH-04, PREB-01, PREB-02, PREB-03, PREB-04]

must_haves:
  truths:
    - "All 8 requirements (WISH-01 through WISH-04, PREB-01 through PREB-04) verified by human in browser"
  artifacts: []
  key_links: []
---

<objective>
Human verification of all wishlist and pre-booking requirements in the browser.

Purpose: Confirm that all 8 requirements (WISH-01, WISH-02, WISH-03, WISH-04, PREB-01, PREB-02, PREB-03, PREB-04) work correctly end-to-end before marking Phase 24 complete.

Output: Verification approval or list of issues to fix.
</objective>

<execution_context>
@C:/Users/Sushasan/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Sushasan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-wishlist-and-pre-booking/24-01-SUMMARY.md
@.planning/phases/24-wishlist-and-pre-booking/24-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify all WISH and PREB requirements in browser</name>
  <files></files>
  <action>
Human verification checkpoint — no automated implementation. Present the verification checklist to the user and wait for approval.

What was built:
- Heart icon toggle on BookCard (catalog) and ActionButtons (book detail) with optimistic updates
- /wishlist page with saved books list and remove capability
- Pre-book button replacing "Out of Stock" on book detail page
- Pre-bookings section on /account page with cancel capability
- Wishlist link in Header and MobileNav
  </action>
  <verify>
    <automated>echo "Checkpoint — requires human verification"</automated>
  </verify>
  <done>Human types "approved" confirming all 8 requirements pass</done>
  <how-to-verify>
    **Prerequisites:** Both backend (`cd backend && poetry run uvicorn app.main:app --reload`) and frontend (`cd frontend && npm run dev`) are running. You are logged in.

    **WISH-01 — Add to wishlist from catalog or detail page:**
    1. Go to http://localhost:3000/catalog
    2. Hover over any book card — heart icon should appear (top-left corner)
    3. Click the heart icon — it should fill red immediately (optimistic) and show "Added to wishlist" toast
    4. Navigate to that book's detail page — the "Add to Wishlist" button should show "Wishlisted" with a filled red heart

    **WISH-02 — Remove from wishlist:**
    5. On the book detail page, click "Wishlisted" — it should revert to "Add to Wishlist" with outline heart, show "Removed from wishlist" toast
    6. Go back to catalog — the heart on that book's card should be un-filled

    **WISH-03 — View wishlist page:**
    7. Add 2-3 books to wishlist from the catalog
    8. Click "Wishlist" in the header nav (or navigate to http://localhost:3000/wishlist)
    9. Verify: all wishlisted books appear with cover thumbnail, title, author, price, and stock status badge
    10. Click the remove button (trash icon) on one item — it should disappear immediately

    **WISH-04 — Optimistic update:**
    11. On the catalog page, rapidly toggle a heart icon on/off — the heart should fill/unfill instantly without waiting for network
    12. If you lose network briefly, the heart should roll back to its previous state with an error toast

    **PREB-01 — Pre-book button for out-of-stock books:**
    13. Find or create an out-of-stock book (stock_quantity=0 in the database)
    14. Go to its detail page — should show "Pre-book" button instead of "Add to Cart"
    15. The "Add to Wishlist" button should still be present

    **PREB-02 — Pre-book a book:**
    16. Click the "Pre-book" button — should show success toast ("Pre-booking confirmed! We will notify you...")
    17. Click "Pre-book" again — should show error toast ("You already have an active pre-booking for this book")

    **PREB-03 — View pre-bookings on account:**
    18. Navigate to http://localhost:3000/account
    19. Verify: Wishlist card link is visible in the grid
    20. Verify: "Pre-bookings" section is visible below the cards
    21. The pre-booked book should appear with title, author, "Waiting" badge, and cancel button

    **PREB-04 — Cancel pre-booking:**
    22. Click "Cancel" on the pre-booking — it should disappear from the list with "Pre-booking cancelled" toast

    **Bonus — Unauthenticated flow:**
    23. Log out, go to catalog, click a heart icon — should show error toast and redirect to /login
    24. Log out, go to an out-of-stock book detail, click Pre-book — should show error toast and redirect to /login
  </how-to-verify>
  <resume-signal>Type "approved" if all requirements pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human has verified all 8 requirements (WISH-01 through WISH-04, PREB-01 through PREB-04) work correctly in the browser.
</verification>

<success_criteria>
Human types "approved" confirming all wishlist and pre-booking requirements are functional.
</success_criteria>

<output>
After completion, create `.planning/phases/24-wishlist-and-pre-booking/24-03-SUMMARY.md`
</output>
