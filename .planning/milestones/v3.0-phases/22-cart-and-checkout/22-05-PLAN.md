---
phase: 22-cart-and-checkout
plan: 05
type: execute
wave: 4
depends_on: ["22-02", "22-03", "22-04"]
files_modified: []
autonomous: false
requirements: [SHOP-01, SHOP-02, SHOP-03, SHOP-04, SHOP-05, SHOP-06, SHOP-09, SHOP-10]

must_haves:
  truths:
    - "User can add a book from catalog or detail page and see cart badge update"
    - "User can view cart with items, quantities, and correct total"
    - "User can update quantities and remove items with optimistic UI"
    - "User can place an order and land on order confirmation page"
  artifacts: []
  key_links: []
---

<objective>
Human verification of all SHOP-01 through SHOP-10 requirements for the cart and checkout phase.

Purpose: Confirm the complete shopping flow works correctly from adding items through checkout and order confirmation.
Output: Human-verified phase completion.
</objective>

<execution_context>
@C:/Users/Sushasan/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Sushasan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete cart and checkout flow — add to cart, view/edit cart, checkout, order confirmation</what-built>
  <how-to-verify>
**Prerequisites:**
- Start backend: `cd backend && poetry run uvicorn app.main:app --reload`
- Start frontend: `cd frontend && npm run dev`
- Sign in with a test account (or create one)

**SHOP-01: Add to cart**
1. Go to /catalog — hover over an in-stock book card and click the cart icon
2. Verify a "Added to cart" toast appears
3. Go to a book detail page — click "Add to Cart" button
4. Verify a "Added to cart" toast appears
5. Click "Add to Cart" again on the same book — verify "Already in cart" toast with "View Cart" link

**SHOP-09: Cart badge**
6. Check the Header — verify the ShoppingCart icon shows a numeric count badge
7. Add another item — verify the badge count increments immediately (optimistic)

**SHOP-04: View cart**
8. Navigate to /cart
9. Verify: item list shows cover thumbnails, titles, authors, unit prices, quantities, line totals
10. Verify: order summary sidebar shows items count, subtotal, total, and Checkout button

**SHOP-02: Update quantity**
11. Click the "+" button on a cart item — verify quantity and line total update immediately
12. Click the "-" button — verify it decreases (minimum 1, minus disabled at 1)
13. Verify: order total in sidebar updates with each change

**SHOP-03: Remove item**
14. Click the trash icon on a cart item — verify it disappears immediately from the list
15. Verify: order total updates accordingly

**SHOP-10: Optimistic updates**
16. (Already observed in steps 7, 11-15) Confirm all add/update/remove actions reflect instantly in the UI without waiting for server response

**SHOP-05: Checkout**
17. Click "Checkout" button in the order summary
18. Verify: confirmation dialog appears asking "Place order for $X.XX?"
19. Click "Cancel" — verify dialog closes without action
20. Click "Checkout" again, then "Place Order" in the dialog
21. Verify: button shows "Placing Order..." loading state
22. Verify: redirected to /orders/{id}?confirmed=true

**SHOP-06: Order confirmation**
23. On the order confirmation page, verify:
    - Green success banner at top
    - Order number and date
    - Item list with titles, quantities, and prices
    - Order total
    - "Continue Shopping" button links to /catalog
    - "View All Orders" button present
24. Navigate back to /cart — verify it shows the empty state ("Your cart is empty" with "Browse Books" CTA)

**Edge case: Unauthenticated access**
25. Sign out and navigate to /cart — verify redirect to /login?callbackUrl=%2Fcart
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All SHOP-01 through SHOP-10 requirements verified by human in browser.
</verification>

<success_criteria>
Human confirms all shopping cart and checkout requirements work correctly in the browser.
</success_criteria>

<output>
After completion, create `.planning/phases/22-cart-and-checkout/22-05-SUMMARY.md`
</output>
