{% extends "base.html" %}
{% block title %}Order Confirmed â€” Bookstore{% endblock %}
{% block content %}
<!-- Success icon -->
<table width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td align="center" style="padding-bottom: 24px;">
      <div style="width: 64px; height: 64px; border-radius: 50%; background-color: #f0fff4; border: 2px solid #c6f6d5; line-height: 64px; text-align: center; font-size: 28px; color: #38a169;">
        &#10003;
      </div>
    </td>
  </tr>
</table>

<!-- Greeting -->
<h1 style="color: #1a202c; margin: 0 0 8px 0; font-size: 26px; font-weight: 700; text-align: center; letter-spacing: -0.02em;">
  Thank you for your order!
</h1>
<p style="color: #718096; margin: 0 0 32px 0; font-size: 15px; text-align: center; line-height: 1.6;">
  Hi {{ customer_name }}, your order <strong style="color: #2d3748;">#{{ order_id }}</strong> has been confirmed and is being processed.
</p>

<!-- Order summary card -->
<table width="100%" cellpadding="0" cellspacing="0" style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; margin-bottom: 24px;">
  <!-- Card header -->
  <tr>
    <td colspan="3" style="padding: 14px 20px; background-color: #f7fafc; border-bottom: 1px solid #e2e8f0;">
      <span style="font-size: 13px; font-weight: 700; color: #4a5568; text-transform: uppercase; letter-spacing: 0.08em;">Order Items</span>
    </td>
  </tr>
  <!-- Book items -->
  {% for item in items %}
  <tr>
    <td width="72" style="padding: 16px 0 16px 16px; vertical-align: top;">
      {% if item.cover_image_url and item.cover_image_url.startswith('http') %}
      <img src="{{ item.cover_image_url }}" alt="{{ item.title }}" width="56" height="76"
           style="display: block; border-radius: 6px; object-fit: cover; border: 1px solid #e2e8f0;" />
      {% else %}
      <div style="width: 56px; height: 76px; border-radius: 6px; background-color: #edf2f7; border: 1px solid #e2e8f0; text-align: center; line-height: 76px;">
        <span style="font-size: 24px; color: #a0aec0;">&#128214;</span>
      </div>
      {% endif %}
    </td>
    <td style="padding: 16px; vertical-align: top;">
      <p style="margin: 0 0 4px 0; font-size: 15px; font-weight: 600; color: #1a202c; line-height: 1.3;">{{ item.title }}</p>
      {% if item.author %}
      <p style="margin: 0 0 8px 0; font-size: 13px; color: #a0aec0;">by {{ item.author }}</p>
      {% endif %}
      <table cellpadding="0" cellspacing="0">
        <tr>
          <td style="background-color: #edf2f7; border-radius: 4px; padding: 3px 8px;">
            <span style="font-size: 12px; color: #4a5568;">Qty: {{ item.quantity }} &times; ${{ item.unit_price }}</span>
          </td>
        </tr>
      </table>
    </td>
    <td width="90" style="padding: 16px 16px 16px 0; vertical-align: top; text-align: right;">
      <p style="margin: 0; font-size: 16px; font-weight: 700; color: #1a202c;">${{ "%.2f"|format(item.unit_price|float * item.quantity) }}</p>
    </td>
  </tr>
  {% if not loop.last %}
  <tr>
    <td colspan="3" style="padding: 0 16px;">
      <div style="border-top: 1px solid #f0f4f8; width: 100%;"></div>
    </td>
  </tr>
  {% endif %}
  {% endfor %}
  <!-- Total row -->
  <tr>
    <td colspan="3" style="padding: 16px 20px; background-color: #f7fafc; border-top: 1px solid #e2e8f0;">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
          <td style="font-size: 14px; font-weight: 600; color: #718096;">Total</td>
          <td style="text-align: right; font-size: 22px; font-weight: 700; color: #1a202c;">${{ total_price }}</td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<!-- Confirmation banner -->
<table width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td style="background: linear-gradient(135deg, #f0fff4 0%, #e6fffa 100%); border: 1px solid #c6f6d5; border-radius: 12px; padding: 20px 24px; text-align: center;">
      <p style="margin: 0 0 4px 0; font-size: 16px; font-weight: 700; color: #276749;">Order Confirmed</p>
      <p style="margin: 0; font-size: 14px; color: #38a169; line-height: 1.5;">We'll have your books ready in no time. Happy reading!</p>
    </td>
  </tr>
</table>
{% endblock %}
